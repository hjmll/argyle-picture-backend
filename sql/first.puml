@startuml
start
:团队成员进入团队空间;
:加载图片列表与成员编辑状态;

if (选择编辑图片?) then (是)
  :检查图片是否被锁定（编辑状态）;
  if (图片是否被锁定?) then (是)
    :提示当前编辑者信息;
    :展示实时编辑效果（只读）;
    stop
  endif

  :锁定图片（设置编辑状态为当前用户）;
  :通过WebSocket广播编辑状态变更;
  :加载图片编辑工具（左旋/右旋/放大/缩小）;

  while (编辑是否完成?) do (否)
    :实时推送编辑操作到所有成员;
    :成员界面同步显示操作效果;
  endwhile

  :保存编辑结果至服务器;
  :更新图片版本记录;
  :解锁图片（清除编辑状态）;
  :通过WebSocket广播编辑完成;

else
  :监听WebSocket消息;
  if (收到编辑状态变更?) then (是)
    :显示当前编辑者信息;
    :同步展示实时编辑效果;
  endif
endif

stop
@enduml
